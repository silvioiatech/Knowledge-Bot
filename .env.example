# ============================================
# KNOWLEDGE BOT 2.0 - 6-STAGE AI PIPELINE
# ============================================
# Copy this file: cp .env.example .env
# Then fill in your API keys and configuration

# ============================================
# REQUIRED API KEYS
# ============================================

# Telegram Bot Token (get from @BotFather)
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here

# Google Gemini API Key (get from https://makersuite.google.com/)
GEMINI_API_KEY=your_google_gemini_api_key

# OpenRouter API Key (get from https://openrouter.ai/)
# *** IMPORTANT: All AI models (Claude, GPT, Images) use OpenRouter ***
OPENROUTER_API_KEY=your_openrouter_api_key

# ============================================
# AI MODEL CONFIGURATION (via OpenRouter)
# ============================================

# Stage 1: Gemini Analysis (Direct API)
GEMINI_MODEL=gemini-1.5-flash
GEMINI_MAX_TOKENS=8192

# Stage 3: Claude Textbook Generation (via OpenRouter)
CLAUDE_MODEL=anthropic/claude-3.5-sonnet
CLAUDE_MAX_TOKENS=8000

# Stage 5: GPT Assembly & QA (via OpenRouter)
GPT_MODEL=openai/gpt-4-1106-preview
GPT_MAX_TOKENS=4000

# Stage 4: Image Generation (via OpenRouter)
IMAGE_MODEL=black-forest-labs/flux-1.1-pro
ENABLE_IMAGE_GENERATION=true
MAX_IMAGES_PER_ENTRY=5

# ============================================
# PIPELINE CONFIGURATION
# ============================================

# Content Quality Settings
TARGET_CONTENT_LENGTH=3000  # Target word count for textbook-quality content
MIN_CATEGORY_CONFIDENCE=0.7  # Threshold for auto-categorization confidence

# Feature Toggles
ENABLE_WEB_RESEARCH=false    # Web fact-checking (requires SERPER_API_KEY)
ENABLE_FACT_CHECKING=false   # Fact verification
IMAGE_QUALITY=high           # Image generation quality

# OpenRouter Base Configuration
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1

# ============================================
# STORAGE CONFIGURATION
# ============================================

# Basic Storage
KNOWLEDGE_BASE_PATH=./knowledge_base
STORAGE_MODE=markdown  # "markdown" or "book"

# Book Mode (Obsidian)
OBSIDIAN_VAULT_PATH=./knowledge_base
ENABLE_BOOK_STRUCTURE=true
AUTO_GENERATE_INDEX=true

# Notion Database Integration (NEW!)
USE_NOTION_STORAGE=false
NOTION_API_KEY=secret_your_notion_integration_key
NOTION_DATABASE_ID=your_notion_database_id

# ============================================
# COST TRACKING & ANALYTICS (NEW!)
# ============================================
ENABLE_COST_TRACKING=true
LOG_TOKEN_USAGE=true

# ============================================
# OPTIONAL SERVICES
# ============================================

# Railway API (for video downloads)
RAILWAY_API_URL=https://your-railway-app.up.railway.app
RAILWAY_API_KEY=  # Optional - Railway doesn't require API key

# Google Search API (for fact-checking - optional)
SERPER_API_KEY=your_serper_api_key_here

# Direct API Keys (fallback options)
ANTHROPIC_API_KEY=  # Optional: Direct Claude API (fallback)
OPENAI_API_KEY=     # Optional: Direct OpenAI API (fallback)

# ============================================
# PRIVATE REPOSITORY SYNC (OPTIONAL)
# ============================================
PRIVATE_REPO_PATH=  # Path to your private knowledge repo (leave empty to disable)
GITHUB_USERNAME=  # Your GitHub username
GITHUB_TOKEN=  # Generate at https://github.com/settings/tokens (repo scope)
AUTO_COMMIT=false  # Automatically commit new knowledge entries
AUTO_PUSH=false  # Automatically push to GitHub

# ============================================
# LIMITS & TIMEOUTS
# ============================================

# Processing Limits
MAX_VIDEO_DURATION_SECONDS=1800  # 30 minutes max
RATE_LIMIT_PER_HOUR=10
TEMP_DIR=./temp

# API Timeouts (in seconds) - Increased for 6-stage pipeline
RAILWAY_DOWNLOAD_TIMEOUT=300
GEMINI_ANALYSIS_TIMEOUT=300      # Enhanced analysis takes longer
CLAUDE_ENRICHMENT_TIMEOUT=180    # Textbook generation
BANANA_IMAGE_TIMEOUT=120         # Image generation
GPT_ASSEMBLY_TIMEOUT=120         # Final assembly
GEMINI_VIDEO_PROCESS_TIMEOUT=300

# ============================================
# EXAMPLE CONFIGURATIONS
# ============================================

# Development Mode (faster, cheaper):
# ENABLE_IMAGE_GENERATION=false
# TARGET_CONTENT_LENGTH=2000
# MAX_IMAGES_PER_ENTRY=2
# CLAUDE_MAX_TOKENS=4000

# Production Mode (full quality):
# ENABLE_IMAGE_GENERATION=true
# TARGET_CONTENT_LENGTH=3500
# MAX_IMAGES_PER_ENTRY=5
# CLAUDE_MAX_TOKENS=8000
